<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mystic Network | Home</title>

    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="style.css">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:wght@200..900&family=Cairo:wght@200..1000&display=swap" rel="stylesheet">
</head>

<body>

    <!-- Background -->
    <video autoplay muted loop playsinline id="bg-video">
        <source src="https://r2.guns.lol/dcd0e93e-a503-4743-941e-815433cb2be5.mp4" type="video/mp4">
    </video>
    <div id="bg-overlay"></div>

    <!-- NAVBAR -->
    <nav>
        <a href="#">
            <div class="logo">
                <img src="logo.webp" alt="Mystic Network">
            </div>
        </a>

        <ul class="nav-links">
            <a href="#">Home</a>
            <a href ="https://store.mystic.ovh/" target="_blank">Store</a>
            <a href="https://discord.gg/SvbZCf3Bhv" target="_blank">Support</a>
        </ul>
    </nav>

    <!-- CONTENT -->
    <div class="container">

        <!-- HERO -->
        <div class="hero">
            <img src="newlog.png" alt="Mystic Network">
            <p class="subtitle">سيرفر ماين كرافت عربي</p>
        </div>

        <!-- STATUS -->
        <div class="status-container">

            <div class="status-card">
                <div class="card-title">Server Status</div>
                <div class="card-content" id="server-status">
                    <div class="spinner"></div> Loading...
                </div>
            </div>

            <div class="status-card">
                <div class="card-title">Online Players</div>
                <div class="card-content" id="players-count">
                    <div class="spinner"></div> Loading...
                </div>
            </div>

            <div class="status-card">
                <div class="card-title">IP</div>
                <div class="card-content">
                    <div class="info-value">play.mystic.ovh</div>
                </div>
            </div>

            <div class="status-card">
                <div class="card-title">Port</div>
                <div class="card-content">
                    <div class="info-value">19132</div>
                </div>
            </div>

        </div>

        <div id="error-container"></div>

    </div>

    <!-- SCRIPT -->
    <script>
        async function fetchServerStatus() {
            try {
                const response = await fetch('https://api.mcsrvstat.us/3/mystic.ovh:25565');
                const data = await response.json();

                const statusElement = document.getElementById('server-status');
                const playersElement = document.getElementById('players-count');

                if (data.online === true) {
                    statusElement.innerHTML = `
                        <span class="status-badge status-online">
                            <span class="status-dot"></span> Online
                        </span>
                    `;

                    const currentPlayers = data.players?.online ?? 0;
                    const maxPlayers = data.players?.max ?? 0;

                    playersElement.innerHTML = `
                        <div class="info-value">${currentPlayers} / ${maxPlayers}</div>
                    `;
                } else {
                    statusElement.innerHTML = `
                        <span class="status-badge status-offline">
                            <span class="status-dot"></span> Offline
                        </span>
                    `;

                    playersElement.innerHTML = `
                        <div class="info-value">-- / --</div>
                    `;
                }

            } catch (error) {
                document.getElementById('server-status').innerHTML = `
                    <span class="status-badge status-offline">
                        <span class="status-dot"></span> Error
                    </span>
                `;

                document.getElementById('players-count').innerHTML = `
                    <div class="info-value">-- / --</div>
                `;

                document.getElementById('error-container').innerHTML = `
                    <div class="error-message">⚠️ Please try again later</div>
                `;
            }
        }

        fetchServerStatus();
        setInterval(fetchServerStatus, 30000);
    </script>

</body>
</html>
